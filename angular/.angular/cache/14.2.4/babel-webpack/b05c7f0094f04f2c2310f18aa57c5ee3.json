{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/Diego/Documents/BIT - PROGRAMACI\\xD3N/PROYECTO UDEMY/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { User } from 'src/app/models/user';\nimport { UserService } from 'src/app/services/user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1, \" Te has identificado correctamente, bienvenido! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" No te has podido identificar correctamente \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El correo no es correcto!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"La contrase\\u00F1a es obligatoria!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class LoginComponent {\n  constructor(_route, _router, _userService) {\n    this._route = _route;\n    this._router = _router;\n    this._userService = _userService;\n    this.title = 'Identificate';\n    this.user = new User('', '', '', '', '', '', 'ROLE_USER', '');\n  }\n\n  ngOnInit() {\n    console.log('Componente de login cargado');\n  }\n\n  onSubmit() {\n    //loguear al usuario y conseguir sus datos\n    this._userService.singup(this.user).subscribe(response => {\n      this.identity = response.user;\n\n      if (!this.identity || this.identity._id) {\n        this.status = 'error';\n      } else {\n        this.status = 'success'; //persistir datos del usuario\n        //conseguir el token\n      }\n\n      console.log(response.user);\n      this.status = 'success';\n    }, error => {\n      var errorMessage = error;\n      console.log(errorMessage);\n\n      if (errorMessage != null) {\n        this.status = 'error';\n      }\n    });\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  features: [i0.ɵɵProvidersFeature([UserService])],\n  decls: 21,\n  vars: 8,\n  consts: [[1, \"container-fluid\"], [1, \"col-lg-5\"], [1, \"h1-strong\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"action\", \"\", 1, \"col-lg-12\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [\"for\", \"#\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", \"pattern\", \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [4, \"ngIf\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"submit\", \"value\", \"Entrar\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-danger\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 2, 0, \"div\", 3);\n      i0.ɵɵtemplate(5, LoginComponent_div_5_Template, 2, 0, \"div\", 4);\n      i0.ɵɵelementStart(6, \"form\", 5, 6);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_6_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(8, \"p\")(9, \"label\", 7);\n      i0.ɵɵtext(10, \"Correo electr\\u00F3nico\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 8, 9);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.user.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, LoginComponent_span_13_Template, 2, 0, \"span\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"p\")(15, \"label\", 7);\n      i0.ɵɵtext(16, \"Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 11, 12);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.user.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(19, LoginComponent_span_19_Template, 2, 0, \"span\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 13);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(7);\n\n      const _r3 = i0.ɵɵreference(12);\n\n      const _r5 = i0.ɵɵreference(18);\n\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.title);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"success\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.status == \"error\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.email);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r3.valid && _r3.touched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r5.valid && _r5.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !_r2.form.valid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.PatternValidator, i4.NgModel, i4.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5jb21wb25lbnQuY3NzIn0= */\"]\n});\n\nfunction name(_x) {\n  return _name.apply(this, arguments);\n}\n\nfunction _name() {\n  _name = _asyncToGenerator(function* (params) {});\n  return _name.apply(this, arguments);\n}","map":{"version":3,"mappings":";AACA,SAAQA,MAAR,EAAgBC,cAAhB,QAA6C,iBAA7C;AACA,SAASC,IAAT,QAAqB,qBAArB;AACA,SAASC,WAAT,QAA4B,+BAA5B;;;;;;;;;ICCQC;IACIA;IACJA;;;;;;IAEAA;IACIA;IACJA;;;;;;IAOQA;IAA4CA;IAAyBA;;;;;;IAMrEA;IAAkDA;IAA6BA;;;;ADZ/F,OAAM,MAAOC,cAAP,CAAqB;EAOzBC,YACUC,MADV,EAEUC,OAFV,EAGUC,YAHV,EAGmC;IAFzB;IACA;IACA;IAER,KAAKC,KAAL,GAAa,cAAb;IACA,KAAKC,IAAL,GAAY,IAAIT,IAAJ,CAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,EAAkB,EAAlB,EAAqB,EAArB,EAAwB,EAAxB,EAA2B,WAA3B,EAAuC,EAAvC,CAAZ;EACA;;EAEFU,QAAQ;IACNC,OAAO,CAACC,GAAR,CAAY,6BAAZ;EACD;;EAEDC,QAAQ;IACV;IACI,KAAKN,YAAL,CAAkBO,MAAlB,CAAyB,KAAKL,IAA9B,EAAoCM,SAApC,CACEC,QAAQ,IAAG;MACT,KAAKC,QAAL,GAAgBD,QAAQ,CAACP,IAAzB;;MACA,IAAI,CAAC,KAAKQ,QAAN,IAAkB,KAAKA,QAAL,CAAcC,GAApC,EAAyC;QACvC,KAAKC,MAAL,GAAc,OAAd;MACD,CAFD,MAEK;QACH,KAAKA,MAAL,GAAa,SAAb,CADG,CAEH;QAEA;MACD;;MACDR,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACP,IAArB;MACA,KAAKU,MAAL,GAAa,SAAb;IACD,CAbH,EAcEC,KAAK,IAAG;MACN,IAAIC,YAAY,GAAQD,KAAxB;MACAT,OAAO,CAACC,GAAR,CAAYS,YAAZ;;MACA,IAAIA,YAAY,IAAI,IAApB,EAA0B;QACxB,KAAKF,MAAL,GAAc,OAAd;MACD;IACF,CApBH;EAsBD;;AA5CwB;;;mBAAdhB,gBAAcD;AAAA;;;QAAdC;EAAcmB;EAAAC,iCAFd,CAACtB,WAAD,CAEc;EAFDuB;EAAAC;EAAAC;EAAAC;IAAA;MCT1BzB,mCAAiC,CAAjC,EAAiC,KAAjC,EAAiC,CAAjC,EAAiC,CAAjC,EAAiC,IAAjC,EAAiC,CAAjC;MAE8BA;MAASA;MAE/BA;MAIAA;MAIAA;MAAoCA;QAAA,OAAY0B,cAAZ;MAAsB,CAAtB;MAChC1B,0BAAG,CAAH,EAAG,OAAH,EAAG,CAAH;MACmBA;MAAkBA;MACjCA;MAAkDA;QAAA;MAAA;MAAlDA;MAEAA;MACJA;MACAA,2BAAG,EAAH,EAAG,OAAH,EAAG,CAAH;MACmBA;MAAUA;MACzBA;MAA2DA;QAAA;MAAA;MAA3DA;MAEAA;MACJA;MAEAA;MACJA;;;;;;;;;;MAzBsBA;MAAAA;MAEYA;MAAAA;MAIDA;MAAAA;MAOyBA;MAAAA;MAE3CA;MAAAA;MAIoDA;MAAAA;MAEpDA;MAAAA;MAGiDA;MAAAA;;;;;;;SD+BxD2B,I;;;;;4BAAf,WAAoBC,MAApB,EAA+B,CAE9B,C","names":["Router","ActivatedRoute","User","UserService","i0","LoginComponent","constructor","_route","_router","_userService","title","user","ngOnInit","console","log","onSubmit","singup","subscribe","response","identity","_id","status","error","errorMessage","selectors","features","decls","vars","consts","template","ctx","name","params"],"sourceRoot":"","sources":["c:\\Users\\Diego\\Documents\\BIT - PROGRAMACIÓN\\PROYECTO UDEMY\\angular\\src\\app\\components\\login\\login.component.ts","c:\\Users\\Diego\\Documents\\BIT - PROGRAMACIÓN\\PROYECTO UDEMY\\angular\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {Router, ActivatedRoute, Params} from '@angular/router'\nimport { User } from 'src/app/models/user';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n  providers: [UserService]\n})\nexport class LoginComponent implements OnInit {\n  public title: string\n  public user: User\n  public status: string | undefined\n  public identity: any\n  public token: any\n\n  constructor(\n    private _route: ActivatedRoute,\n    private _router: Router,\n    private _userService: UserService\n  ) {\n    this.title = 'Identificate'\n    this.user = new User('','','','','','','ROLE_USER','')\n   }\n\n  ngOnInit(): void {\n    console.log('Componente de login cargado')\n  }\n\n  onSubmit(){\n//loguear al usuario y conseguir sus datos\n    this._userService.singup(this.user).subscribe(\n      response => {\n        this.identity = response.user\n        if (!this.identity || this.identity._id) {\n          this.status = 'error'\n        }else{\n          this.status= 'success'\n          //persistir datos del usuario\n\n          //conseguir el token\n        }\n        console.log(response.user)\n        this.status= 'success'\n      },\n      error => {\n        var errorMessage = <any>error\n        console.log(errorMessage)\n        if (errorMessage != null) {\n          this.status = 'error'\n        }\n      }\n    )\n  }\n\n async function name(params:type) {\n  \n }\n\n}\n","<section class=\"container-fluid\">\n    <div class=\"col-lg-5\">\n        <h1 class=\"h1-strong\">{{title}}</h1>\n\n        <div class=\"alert alert-success\" *ngIf=\"status == 'success'\">\n            Te has identificado correctamente, bienvenido!\n        </div>\n\n        <div class=\"alert alert-danger\" *ngIf=\"status == 'error'\">\n            No te has podido identificar correctamente\n        </div>\n\n        <form action=\"\" #loginForm=\"ngForm\" (ngSubmit)=\"onSubmit()\" class=\"col-lg-12\">\n            <p>\n                <label for=\"#\">Correo electrónico</label>\n                <input type=\"email\" name=\"email\" #email=\"ngModel\" [(ngModel)]=\"user.email\" class=\"form-control\" required\n                    pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\">\n                <span *ngIf=\"!email.valid && email.touched\">El correo no es correcto!</span>\n            </p>\n            <p>\n                <label for=\"#\">Contraseña</label>\n                <input type=\"password\" name=\"password\" #password=\"ngModel\" [(ngModel)]=\"user.password\"\n                    class=\"form-control\" required>\n                <span *ngIf=\"!password.valid && password.touched\">La contraseña es obligatoria!</span>\n            </p>\n\n            <input type=\"submit\" value=\"Entrar\" class=\"btn btn-success\" [disabled]=\"!loginForm.form.valid\">\n        </form>\n    </div>\n</section>"]},"metadata":{},"sourceType":"module"}